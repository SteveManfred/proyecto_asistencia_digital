<!-- Mi new_case.html-->
{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Registrar Nuevo Caso</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container mt-1">
        <h2 style="font-weight: bold">Registrar Nuevo Caso</h2>
        </br>
        <form method="POST" action="{% url 'crear_caso' %}" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Sección 1: Selección de clase de conflicto -->
            <h3>Seleccione el tipo de conflicto</h3>
            <div class="form-check" id="option1">
                <input class="form-check-input" type="radio" name="conflict_type" id="conflict1" value="Problema de compra" required>
                <label class="form-check-label" for="conflict1">
                    <img src="{% static 'img/compra.png' %}" alt="Problema Compra" class="img-thumbnail"> Tuve un problema durante el proceso de compra.
                </label>
            </div>
            <div class="form-check" id="option2">
                <input class="form-check-input" type="radio" name="conflict_type" id="conflict2" value="Problema de entrega" required>
                <label class="form-check-label" for="conflict2">
                    <img src="{% static 'img/entrega.png' %}" alt="Problema Entrega" class="img-thumbnail"> Tengo un problema con la entrega.
                </label>
            </div>
            <div class="form-check" id="option3">
                <input class="form-check-input" type="radio" name="conflict_type" id="conflict3" value="Problema de producto" required>
                <label class="form-check-label" for="conflict3">
                    <img src="{% static 'img/producto.png' %}" alt="Problema Producto" class="img-thumbnail"> Tengo un problema con el producto.
                </label>
            </div>
            </br>
        
            <!-- Sección 2: Detalles del Conflicto -->
            <h3>Detalles del Conflicto</h3>
        
            <div class="mb-3">
                <label for="conflict_details">¿Qué sucedió exactamente?</label>
                <select class="form-select" name="conflict_details" id="conflict_details" required>
                    <option value="">Seleccione una opción</option>
                    <option value="El producto llegó defectuoso">El producto llegó defectuoso</option>
                    <option value="No se realizó la entrega">No se realizó la entrega</option>
                    <option value="El servicio no fue el prometido">El servicio no fue el prometido</option>
                    <option value="otro">Otro</option>
                </select>
            </div>
        
            <div class="mb-3">
                <label for="product_size">¿De qué tamaño es el producto?</label>
                <select class="form-select" name="product_size" id="product_size" required>
                    <option value="">Seleccione una opción</option>
                    <option value="Muy Grande">Muy Grande</option>
                    <option value="Grande">Grande</option>
                    <option value="Mediano">Mediano</option>
                    <option value="Chico">Chico</option>
                </select>
            </div>
        
            <div class="mb-3">
                <label for="purchase_conditions">¿Cuáles fueron las condiciones de compra?</label>
                <select class="form-select" name="purchase_conditions" id="purchase_conditions" required>
                    <option value="">Seleccione una opción</option>
                    <option value="Precio oferta/promoción">Compré con una oferta/promoción</option>
                    <option value="Precio normal">Compré a precio normal</option>
                    <option value="No sabe">No estoy seguro</option>
                </select>
            </div>
        
            <div class="mb-3">
                <label for="store_response">¿Has recibido alguna respuesta de la tienda?</label>
                <select class="form-select" name="store_response" id="store_response" required>
                    <option value="">Seleccione una opción</option>
                    <option value="Solucion satisfactoria">Sí, solución satisfactoria, pero...</option>
                    <option value="Respuesta Insatisfactoria">Sí, respuesta insatisfactoria</option>
                    <option value="No hubo respuesta">No, no he recibido respuesta</option>
                </select>
            </div>
        
            <div class="mb-3">
                <label for="resolution_expectation">¿Cuál es tu expectativa de resolución?</label>
                <select class="form-select" name="resolution_expectation" id="resolution_expectation" required>
                    <option value="">Seleccione una opción</option>
                    <option value="Reembolso completo">Reembolso completo</option>
                    <option value="Reemplazo del producto">Reemplazo del producto</option>
                    <option value="Crédito en la tienda">Crédito en la tienda</option>
                </select>
            </div>
            </br>
        
            <!-- Sección 3: Información sobre la transacción -->
            <h3>Información sobre la transacción</h3>
            <div class="mb-3">
                <label>Método de Adquisición</label>
                <select class="form-select" name="acquisition_method" required>
                    <option value="Online">Online</option>
                    <option value="Presencial">Presencial</option>
                </select>
            </div>
            <div class="mb-3">
                <label>Fecha de compra</label>
                <input type="date" class="form-control" name="purchase_date" required>
            </div>
            <div class="mb-3">
                <label>Nombre de la tienda</label>
                <input type="text" class="form-control" name="store_name" required>
            </div>
            <div class="mb-3">
                <label>Número de Pedido</label>
                <input type="text" class="form-control" name="order_number" required>
            </div>
            </br>
        
            <!-- Sección 4: Acciones previas -->
            <h3>Acciones previas (Opcional)</h3>
            <div class="mb-3">
                <label>¿Se comunicó con la tienda?</label>
                <select class="form-select" name="contacted_store">
                    <option value="No">No</option>
                    <option value="Si">Si</option>
                </select>
            </div>
            <div class="mb-3">
                <label>Fechas de contacto</label>
                <input type="date" class="form-control" name="contact_date">
            </div>
            <div class="mb-3">
                <label>Método de contacto</label>
                <select class="form-select" name="contact_method">
                    <option value="">Seleccione una opción</option>
                    <option value="Presencial">Presencial</option>
                    <option value="Llamada telefonica">Llamada telefónica</option>
                    <option value="Correo Electronico">Correo electrónico</option>
                    <option value="Chat">Chat en línea</option>
                </select>
            </div>
            </br>
        
            <!-- Sección 5: Información adicional -->
            <h3>Información adicional (Opcional)</h3>
            <div class="mb-3">
                <label>Detalles adicionales que pueden relatar el caso</label>
                <textarea class="form-control" name="additional_details" rows="3"></textarea>
            </div>
            </br>
        
            <!-- Sección 6: Adjuntar documentos -->
            <h3>Adjuntar documentos (Opcional)</h3>
            <div class="mb-3">
                <label>Adjuntar documentos o imágenes como evidiencia (máximo 2)</label>
                <input type="file" class="form-control" name="documents" multiple>
            </div>
            </br>
        
            {% if form.errors %}
            <div class="alert alert-danger">
                <ul>
                {% for field in form %}
                    {% for error in field.errors %}
                        <li>{{ field.label }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
                </ul>
            </div>
            {% endif %}
        
            <button type="submit" class="btn btn-success mt-3">Finalizar y Guardar</button>
        </form>
    </div>

    <script>
        document.querySelectorAll('.form-check-input').forEach(input => {
            input.addEventListener('change', function () {
                document.querySelectorAll('.form-check').forEach(option => {
                    option.classList.remove('selected');
                });
                this.closest('.form-check').classList.add('selected');
            });
        });
    </script>

</body>
</html>
